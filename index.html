<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Chatbot with Realtime DB</title>
<style>
  body { font-family: Arial; text-align:center; margin-top:50px; background:#f0f0f0; }
  #chat { width: 400px; height: 400px; overflow-y: auto; margin: 0 auto; background:white; padding:10px; border-radius:10px; border:1px solid #ccc; }
  #userInput { width: 300px; padding:5px; }
  #sendBtn { padding:5px 10px; }
  .message { margin:5px 0; padding:5px; border-radius:5px; }
  .user { background:#d1f0ff; text-align:right; }
  .ai { background:#ffd1d1; text-align:left; }
</style>
</head>
<body>

<h1>Learning AI Chatbot</h1>

<div id="chat"></div>
<input type="text" id="userInput" placeholder="Type something...">
<button id="sendBtn">Send</button>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // --- FIREBASE CONFIG ---
  const firebaseConfig = {
    apiKey: "AIzaSyCnWbzujk4iwZnDxceRDQRqw4VmJU1owC4",
    authDomain: "zezo-36a82.firebaseapp.com",
    databaseURL: "https://zezo-36a82-default-rtdb.firebaseio.com",
    projectId: "zezo-36a82",
    storageBucket: "zezo-36a82.firebasestorage.app",
    messagingSenderId: "641346503114",
    appId: "1:641346503114:web:faef4b2a051dcc059f4f33",
    measurementId: "G-8BXRM7FYDM"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const chatDiv = document.getElementById('chat');
  const input = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');

  sendBtn.onclick = async () => {
    const userText = input.value.trim();
    if (!userText) return;
    addMessage('user', userText);
    input.value = '';
    await respond(userText);
  };

  function addMessage(sender, text) {
    const div = document.createElement('div');
    div.className = 'message ' + sender;
    div.textContent = text;
    chatDiv.appendChild(div);
    chatDiv.scrollTop = chatDiv.scrollHeight;
  }

  async function respond(userText) {
    const key = userText.toLowerCase();
    const snapshot = await db.ref('knowledge/' + key).get();
    if (snapshot.exists()) {
      addMessage('ai', snapshot.val());
    } else {
      const answer = prompt(`I don't know "${userText}". Teach me!`);
      if (answer) {
        await db.ref('knowledge/' + key).set(answer);
        addMessage('ai', answer);
      } else {
        addMessage('ai', "I won't remember that.");
      }
    }
  }
</script>
</body>
</html>